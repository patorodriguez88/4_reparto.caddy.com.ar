<!doctype html>
<html lang="es">
  <head>
    <title>Reparto Caddy | Warehouse</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, viewport-fit=cover" />
    <meta content="Sistema de Gestion de envíos Caddy." name="description" />
    <meta content="Coderthemes" name="author" />
    <meta name="theme-color" content="#111827" />
    <!-- PWA / iOS -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <link rel="manifest" href="pwa/manifest.webmanifest" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="images/favicon.ico" />
    <!-- Hyper vendor -->
    <link href="../hyper/dist/saas/assets/css/vendor/responsive.bootstrap5.css" rel="stylesheet" type="text/css" />
    <link href="../hyper/dist/saas/assets/css/vendor/buttons.bootstrap5.css" rel="stylesheet" type="text/css" />
    <link href="../hyper/dist/saas/assets/css/vendor/select.bootstrap5.css" rel="stylesheet" type="text/css" />
    <!-- App css -->
    <link href="../hyper/dist/saas/assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="../hyper/dist/saas/assets/css/app.min.css" rel="stylesheet" type="text/css" id="light-style" />
    <link href="../hyper/dist/saas/assets/css/app-dark.min.css" rel="stylesheet" type="text/css" id="dark-style" />
    <!-- Dropzone -->
    <link href="../hyper/dist/saas/assets/css/vendor/dropzone.css" rel="stylesheet" />
    <!-- Custom -->
    <link href="css/hdr.css" rel="stylesheet" type="text/css" />
  </head>
  <body class="loading" data-layout="topnav">
    <!-- Install banner -->
    <div id="installBanner" style="display: none" class="card shadow-sm position-fixed bottom-0 start-0 end-0 m-3">
      <div class="card-body d-flex align-items-center justify-content-between gap-2">
        <div>
          <div class="fw-bold">Instalá Caddy Reparto</div>
          <div class="text-muted small">Más rápido y sin pestañas.</div>
        </div>
        <div class="d-flex gap-2">
          <button id="btnInstallLater" class="btn btn-light btn-sm">Más tarde</button>
          <button id="btnInstallNow" class="btn btn-primary btn-sm">Instalar</button>
        </div>
      </div>
    </div>
    <!-- Begin page -->
    <div class="wrapper">
      <div class="content-page">
        <div class="content">
          <div class="navbar-custom topnav-navbar" id="navbar" style="display: none">
            <!-- <div class="container-fluid"> -->
            <div class="container-fluid d-flex align-items-center justify-content-between">
              <div class="lines"><span></span><span></span><span></span></div>

              <ul class="list-unstyled topbar-menu mb-0 d-flex align-items-center gap-0">
                <!-- <ul class="list-unstyled topbar-menu mb-0 align-items-center gap-0"> -->
                <!-- <ul class="list-unstyled topbar-menu mb-0 d-flex align-items-center"></ul> -->
                <li class="dropdown notification-list mt-0">
                  <h2 class="page-title mb-0">
                    <span class="badge bg-warning text-light" id="hdr-header"> </span>
                    <span id="badge-total" class="badge bg-secondary text-light">0</span>
                    <span id="badge-entregados" class="badge bg-danger text-light">0</span>
                    <span id="badge-sinentregar" class="badge bg-success text-light">0</span>
                  </h2>
                </li>
                <li class="dropdown notification-list mr-0">
                  <a
                    class="nav-link dropdown-toggle arrow-none"
                    data-bs-toggle="dropdown"
                    href="#"
                    role="button"
                    aria-haspopup="false"
                    aria-expanded="false"
                  >
                    <i class="dripicons-search noti-icon"></i>
                  </a>
                  <div class="dropdown-menu dropdown-menu-animated dropdown-lg p-0">
                    <div class="p-3">
                      <input
                        id="buscarnombre"
                        type="text"
                        class="form-control"
                        placeholder="Buscar ..."
                        aria-label="Buscar ..."
                      />
                      <div class="modal-footer">
                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancelar</button>
                        <button id="btn-search" type="button" class="btn btn-primary">Aceptar</button>
                      </div>
                    </div>
                  </div>
                </li>
                <li class="dropdown notification-list">
                  <a class="nav-link arrow-none" href="#" id="btnInstallBell" role="button" aria-label="Instalar app">
                    <i class="dripicons-bell noti-icon"></i>
                    <span class="noti-icon-badge"></span>
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <!-- end Topbar -->

          <div class="topnav" id="topnav" style="display: none">
            <div class="container-fluid">
              <nav class="navbar navbar-dark navbar-expand-lg topnav-menu">
                <div class="collapse navbar-collapse" id="topnav-menu-content">
                  <ul class="navbar-nav">
                    <li class="nav-item">
                      <a class="nav-link" href="#" id="mi_recorrido">
                        <i class="mdi mdi-map-marker-multiple-outline"></i> Ver Recorrido
                      </a>
                    </li>

                    <li class="nav-item">
                      <a class="nav-link" href="#" id="cerrar_recorrido">
                        <i class="mdi mdi-map-marker-off-outline"></i> Cerrar Recorrido
                      </a>
                    </li>

                    <li class="nav-item">
                      <a class="nav-link" href="#" id="mi_cuenta"> <i class="uil-calender"></i> Mi Cuenta </a>
                    </li>

                    <li class="nav-item">
                      <a class="nav-link text-warning" href="hdr.html" id="salir">
                        <i class="mdi mdi-reply-outline"></i> Salir
                      </a>
                    </li>
                  </ul>
                </div>
              </nav>
            </div>
          </div>

          <div
            id="info-alert-modal"
            class="modal fade"
            data-controls-modal="info-alert-modal"
            tabindex="-1"
            role="dialog"
            data-backdrop="static"
            data-keyboard="false"
          >
            <div class="modal-dialog modal-sm modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-body p-4">
                  <div class="text-center">
                    <i class="dripicons-information h1 text-info"></i>
                    <h4 id="info-alert-modal-header" class="mt-2">Actualizando...</h4>
                    <p id="info-alert-body" class="mt-3"></p>
                    <div class="spinner-grow text-primary" role="status"></div>
                    <!--                                   <button type="button" class="btn btn-info my-2" data-dismiss="modal">Continue</button> -->
                  </div>
                </div>
              </div>
              <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
          </div>
          <!-- /.modal -->

          <!-- DESDE ACA -->
          <div class="row">
            <div class="col-12 px-2">
              <!-- en vez de ms-2 para no romper el ancho -->

              <!-- CARD: Badges -->
              <div class="card tilebox-one">
                <div class="card-body">
                  <div class="row g-2 text-center">
                    <div class="col-3">
                      <div class="badge bg-primary w-100 py-3 fs-3">
                        <div class="small">Recorrido</div>
                        <b id="wh-recorrido">–</b>
                      </div>
                    </div>

                    <div class="col-3">
                      <div class="badge bg-secondary w-100 py-3 fs-3">
                        <div class="small">Esperados</div>
                        <b id="wh-esperados">0</b>
                      </div>
                    </div>

                    <div class="col-3">
                      <div class="badge bg-success w-100 py-3 fs-3">
                        <div class="small">Escaneados</div>
                        <b id="wh-ok">0</b>
                      </div>
                    </div>

                    <div class="col-3">
                      <div class="badge bg-danger w-100 py-3 fs-3">
                        <div class="small">Faltantes</div>
                        <b id="wh-faltantes">0</b>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- BOTÓN SCAN centrado -->
              <div class="row mt-3">
                <div class="col-12 d-flex justify-content-center">
                  <button
                    type="button"
                    class="btn btn-warning btn-lg d-flex align-items-center justify-content-center gap-2"
                    style="width: 90%; max-width: 500px"
                    onclick="irAScan()"
                  >
                    <i class="mdi mdi-qrcode-scan fs-3"></i>
                    <span>Iniciar Escaneo de Bultos</span>
                  </button>
                </div>
              </div>

              <!-- STOP + SCANNER -->
              <div class="row mt-2">
                <div class="col-12 d-flex justify-content-center">
                  <button
                    id="btn-stop"
                    type="button"
                    class="btn btn-danger"
                    style="display: none; max-width: 500px; width: 90%"
                  >
                    Detener
                  </button>
                </div>

                <div class="col-12 d-flex justify-content-center">
                  <div
                    id="scanner"
                    style="width: 90%; max-width: 520px; height: 320px; margin-top: 12px; display: none"
                  ></div>
                </div>
              </div>

              <!-- LISTA -->
              <div class="row mt-3">
                <div class="col-12">
                  <div class="card">
                    <div class="card-body">
                      <h5 class="mb-2">Lista de bultos</h5>
                      <ul id="wh-lista" class="list-group"></ul>
                    </div>
                  </div>
                </div>
              </div>

              <!-- CONFIRMAR -->
              <div class="row mt-2">
                <div class="col-12 d-flex justify-content-center"></div>
                <button
                  id="btn-confirmar"
                  type="button"
                  class="btn btn-success btn-lg d-flex align-items-center justify-content-center gap-2"
                  disabled
                >
                  Confirmar carga
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- HASTA ACA -->
        <footer class="footer">
          <div class="container-fluid">
            <div class="row w-auto">
              <div class="col-md-12 fixed-bottom">
                <script>
                  document.write(new Date().getFullYear());
                </script>
                © Triangular S.A.
              </div>
            </div>
          </div>

          <nav class="app-bottomnav">
            <a href="hdr.html#operacion" class="nav-item">
              <i class="mdi mdi-map-marker-path botonera-icon"></i>
              <span>Recorrido</span>
            </a>

            <a href="warehouse.html" class="nav-item active">
              <i class="mdi mdi-qrcode-scan botonera-icon"></i>
              <span>Warehouse</span>
            </a>

            <!-- <a href="hdr.html#totales" class="nav-item">
      <i class="mdi mdi-chart-donut"></i>
      <span>Totales</span>
    </a> -->

            <a href="hdr.html#cuenta" class="nav-item">
              <i class="mdi mdi-account-outline botonera-icon"></i>
              <span>Cuenta</span>
            </a>

            <a href="#" class="nav-item" id="wh-salir">
              <i class="mdi mdi-reply-outline botonera-icon"></i>
              <span>Salir</span>
            </a>
          </nav>
        </footer>
      </div>
      <!-- ============================================================== -->
      <!-- End Page content -->
      <!-- ============================================================== -->
    </div>

    <!-- jQuery + bundle Hyper -->
    <script src="../hyper/dist/saas/assets/js/vendor.min.js"></script>
    <script src="../hyper/dist/saas/assets/js/app.min.js"></script>

    <!-- Plugins extra -->
    <script src="../hyper/dist/saas/assets/js/vendor/dropzone.min.js"></script>
    <script src="../hyper/dist/saas/assets/js/ui/component.fileupload.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Tus scripts -->
    <script src="Proceso/js/db.js"></script>
    <script src="Proceso/js/warehouse.js"></script>

    <!-- 8) Lector de códigos de barra -->
    <script src="https://unpkg.com/quagga@0.12.1/dist/quagga.min.js"></script>
    <!-- <script src="script.js"></script> -->
  </body>
</html>
